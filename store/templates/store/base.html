{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Shopilo{% endblock %}</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="{% static 'store/shopping.png' %}">
  <style>
    html {
      scroll-behavior: smooth;
    }
    .gold {
      color: #DAA520 !important;
    }
    .bg-gold {
      background-color: #DAA520 !important;
    }
    .hover-gold:hover {
      color: #DAA520 !important;
    }
  </style>
</head>
<body class="bg-white flex flex-col min-h-screen scroll-smooth">

<!-- Navbar -->
<nav class="fixed top-0 left-0 right-0 z-50 bg-white flex items-center justify-between py-4 px-4 sm:px-6 md:px-8 shadow-sm">
  <!-- Left: Logo -->
  <div class="flex items-center cursor-pointer flex-shrink-0">
    <img src="{% static 'store/shopping.png' %}" alt="Logo" class="w-10 h-10">
    <h1 class="text-xl sm:text-2xl font-bold ml-2 gold">Shopilo</h1>
  </div>

  <!-- Center: Links (Desktop Only) -->
  <div class="hidden md:flex flex-wrap gap-4 lg:gap-8 text-gray-700 font-medium text-base lg:text-lg ml-6">
    <a href="{% url 'home' %}" class="hover-gold">Home</a>
    <a href="{% url 'home' %}#products" class="hover-gold">Products</a>
    <a href="{% url 'home' %}#categories" class="hover-gold">Categories</a>
    <a href="{% url 'home' %}#about" class="hover-gold">About</a>
    <a href="{% url 'home' %}#contact" class="hover-gold">Contact</a>
    {% if user.is_staff or user.is_superuser %}
      <a href="{% url 'admin_panel' %}" class="hover-gold">Admin Panel</a>
    {% endif %}
  </div>

  <!-- Right: Icons -->
  <div class="flex items-center space-x-3 sm:space-x-4">
    <!-- Search Form -->
    <form method="GET" action="{% url 'search_products' %}" class="hidden" id="searchForm">
      <input id="searchInput" name="q" type="text" placeholder="Search..." 
             class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-[#DAA520] transition text-sm sm:text-base">
    </form>

    <!-- Search Button -->
    <button onclick="toggleSearch()" class="focus:outline-none">
      <svg class="w-5 h-5 sm:w-6 sm:h-6 text-gray-500 hover:text-[#DAA520]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35M16 10a6 6 0 11-12 0 6 6 0 0112 0z" />
      </svg>
    </button>

    <!-- Cart -->
    <div class="relative">
      <a href="{% url 'cart' %}" class="block">
        <svg class="w-6 h-6 sm:w-7 sm:h-7 text-gray-500 hover:text-[#DAA520]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-1.3 5.2a1 1 0 00.97 1.3H19M16 16a2 2 0 100 4 2 2 0 000-4zm-8 0a2 2 0 100 4 2 2 0 000-4z" />
        </svg>
        {% if cart_count > 0 and not request.session.cart_seen %}
          <span class="absolute -top-2 -right-2 bg-gold text-xs font-bold px-1.5 py-0.5 rounded-full">
            {{ cart_count }}
          </span>
        {% endif %}
      </a>
    </div>

    {% if user.is_authenticated %}
      <a href="{% url 'profile' %}" class="block w-8 h-8 sm:w-9 sm:h-9 rounded-full overflow-hidden border-2 border-gold">
        <img src="{{ user.profile.profile_image.url }}" alt="Profile" class="w-full h-full object-cover">
      </a>
    {% else %}
      <a href="{% url 'login' %}" class="px-3 py-1 border border-gold gold text-xs sm:text-sm font-medium rounded hover:bg-yellow-100 transition">Login</a>
    {% endif %}

    <!-- Mobile Menu Button -->
    <div class="md:hidden">
      <button id="menuBtn" class="focus:outline-none">
        <svg class="w-7 h-7 text-gray-700 hover:text-[#DAA520]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </div>
  </div>
</nav>

<!-- Mobile Menu -->
<div id="mobileMenu" 
     class="hidden md:hidden fixed top-16 left-0 w-full h-screen bg-white shadow-md px-6 py-6 space-y-6 text-gray-700 font-medium z-50 transition-all duration-300">
  <a href="{% url 'home' %}" class="block hover-gold">Home</a>
  <a href="{% url 'home' %}#products" class="block hover-gold">Products</a>
  <a href="{% url 'home' %}#categories" class="block hover-gold">Categories</a>
  <a href="{% url 'home' %}#about" class="block hover-gold">About</a>
  <a href="{% url 'home' %}#contact" class="block hover-gold">Contact</a>
  {% if user.is_staff or user.is_superuser %}
    <a href="{% url 'admin_panel' %}" class="block hover-gold">Admin Panel</a>
  {% endif %}
</div>



<!-- Main Content -->
<main class="flex-grow container mx-auto px-4 sm:px-6 md:px-8 pt-28 sm:pt-32 pb-6">
  {% block content %}
  {% endblock %}
</main>

<!-- Footer -->
<footer class="bg-gray-100 text-gray-700 px-6 sm:px-10 lg:px-16 py-10 mt-10 border-t border-gray-200" id="contact">
  <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 items-center text-center md:text-left">
    
    <!-- Logo -->
    <div class="flex flex-col md:flex-row items-center md:items-center justify-center md:justify-start space-y-3 md:space-y-0 md:space-x-2">
      <img src="{% static 'store/shopping.png' %}" width="40" alt="Logo">
      <span class="text-2xl font-bold gold">Shopilo</span>
    </div>

    <!-- Links -->
    <div class="flex flex-col sm:flex-row justify-center md:justify-center space-y-3 sm:space-y-0 sm:space-x-6 font-medium">
      <a href="{% url 'home' %}" class="hover-gold">Home</a>
      <a href="{% url 'home' %}#products" class="hover-gold">Products</a>
      <a href="{% url 'home' %}#categories" class="hover-gold">Categories</a>
      <a href="{% url 'home' %}#about" class="hover-gold">About</a>
      <a href="{% url 'home' %}#contact" class="hover-gold">Contact</a>
    </div>

    <!-- Social Icons -->
    <div class="flex justify-center md:justify-end space-x-5 text-lg">
      <a href="#" target="_blank" class="text-gray-600 hover:text-[#DAA520] transition">
        <i class="fab fa-facebook-f"></i>
      </a>
      <a href="#" target="_blank" class="text-gray-600 hover:text-[#DAA520] transition">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="#" target="_blank" class="text-gray-600 hover:text-[#DAA520] transition">
        <i class="fab fa-instagram"></i>
      </a>
    </div>
  </div>

  <!-- CopyRight -->
  <div class="text-center mt-8 text-sm text-gray-500">
    &copy; 2025 Shopilo. All rights reserved.
  </div>
</footer>


<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  function toggleSearch() {
    const form = document.getElementById("searchForm");
    const input = document.getElementById("searchInput");

    if (form.classList.contains("hidden")) {
      form.classList.remove("hidden");
      input.focus();
    } else {
      if (input.value.trim() !== '') {
        form.submit();
      } else {
        input.focus();
      }
    }
  }

  document.addEventListener("DOMContentLoaded", function () {
    if (window.location.pathname.includes('/cart')) {
      const cartBadge = document.querySelector(".relative span.bg-gold");
      if (cartBadge) {
        cartBadge.style.display = "none";
      }
    }
  });

  // Toggle Mobile Menu
  document.getElementById("menuBtn").addEventListener("click", function () {
    const menu = document.getElementById("mobileMenu");
    menu.classList.toggle("hidden");
  });

</script>
</body>
</html>
